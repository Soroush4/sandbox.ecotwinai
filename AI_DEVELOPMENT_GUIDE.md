# ุฑุงูููุง ฺฉุงูู ุชูุณุนู ูพุฑูฺู Digital Twin STL Editor

## ๐ ููุฑุณุช ูุทุงูุจ

1. [ูุนุฑู ูพุฑูฺู](#ูุนุฑู-ูพุฑูฺู)
2. [ูุนูุงุฑ ฺฉู](#ูุนูุงุฑ-ฺฉู)
3. [ุณุงุฎุชุงุฑ ูุงูโูุง](#ุณุงุฎุชุงุฑ-ูุงูโูุง)
4. [ุฌุฑุงู ุฑุงูโุงูุฏุงุฒ](#ุฌุฑุงู-ุฑุงูโุงูุฏุงุฒ)
5. [ูุงฺููโูุง ุงุตู](#ูุงฺููโูุง-ุงุตู)
6. [ุณุณุชูโูุง ฺฉูุฏ](#ุณุณุชูโูุง-ฺฉูุฏ)
7. [ุฑุงุจุท ฺฉุงุฑุจุฑ](#ุฑุงุจุท-ฺฉุงุฑุจุฑ)
8. [ุงุจุฒุงุฑูุง ุทุฑุงุญ](#ุงุจุฒุงุฑูุง-ุทุฑุงุญ)
9. [ุงุจุฒุงุฑูุง ุชุจุฏู](#ุงุจุฒุงุฑูุง-ุชุจุฏู)
10. [ูุฏุฑุช ุตุญูู](#ูุฏุฑุช-ุตุญูู)
11. [ููุฑูพุฑุฏุงุฒ ู ุณุงู](#ููุฑูพุฑุฏุงุฒ-ู-ุณุงู)
12. [ฺฉูุชุฑู ุฏูุฑุจู](#ฺฉูุชุฑู-ุฏูุฑุจู)
13. [ูุฏุฑุช ุงูุชุฎุงุจ](#ูุฏุฑุช-ุงูุชุฎุงุจ)
14. [ุฐุฎุฑู ู ุจุงุฑฺฏุฐุงุฑ](#ุฐุฎุฑู-ู-ุจุงุฑฺฏุฐุงุฑ)
15. [ุชูุณุนู ู ุงูุฒูุฏู ูฺฺฏ](#ุชูุณุนู-ู-ุงูุฒูุฏู-ูฺฺฏ)
16. [ุนุจโุงุจ](#ุนุจโุงุจ)

---

## ูุนุฑู ูพุฑูฺู

**Digital Twin STL Editor** ฺฉ ูุฑุงุดฺฏุฑ ุณูโุจุนุฏ ูพุดุฑูุชู ุงุณุช ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ **Babylon.js** ุณุงุฎุชู ุดุฏู ุงุณุช. ุงู ูพุฑูฺู ุงูฺฉุงู ุงุฌุงุฏุ ูุฑุงุด ู ูุฏุฑุช ุตุญููโูุง ุณูโุจุนุฏ ุฑุง ูุฑุงูู ูโฺฉูุฏ.

### ูฺฺฏโูุง ุงุตู:
- โ ุงุฌุงุฏ ุงุดฺฉุงู ุฏู ุจุนุฏ (ูุณุชุทูุ ุฏุงุฑูุ ฺูุฏุถูุน)
- โ ูุฑุงุฑ ุฏุงุฏู ุฏุฑุฎุชโูุง ุจุง ูุฏูโูุง 3D
- โ ุชููุฏ ุณุงุฎุชูุงูโูุง ุชุตุงุฏู
- โ ุงุจุฒุงุฑูุง ุชุจุฏู (ุงูุชุฎุงุจุ ุฌุงุจุฌุงุ ฺุฑุฎุดุ ููุงุณ)
- โ ุณุณุชู ููุฑูพุฑุฏุงุฒ ูพุดุฑูุชู ุจุง ุณุงูโูุง ุฑูโุชุงู
- โ ฺฉูุชุฑู ุฏูุฑุจู ArcRotate
- โ ุฑุงุจุท ฺฉุงุฑุจุฑ ูุงฺููุงุฑ ู ูุงุจู ุชูุณุนู

### ุชฺฉููููฺโูุง ุงุณุชูุงุฏู ุดุฏู:
- **Babylon.js 6.0.0**: ููุชูุฑ ุฑูุฏุฑูฺฏ ุณูโุจุนุฏ
- **JavaScript ES6+**: ููุทู ุจุฑูุงูู
- **HTML5 Canvas**: ุจูู ุฑูุฏุฑูฺฏ
- **CSS3**: ุงุณุชุงูโุฏู
- **SVG**: ุขฺฉููโูุง
- **Earcut**: ุจุฑุง ุชุฑโุงูฺฏููุงุณูู ฺูุฏุถูุนโูุง

---

## ูุนูุงุฑ ฺฉู

ูพุฑูฺู ุงุฒ ูุนูุงุฑ **ูุฏููุงุฑ** ุงุณุชูุงุฏู ูโฺฉูุฏ ฺฉู ูุฑ ูุงฺูู ูุณุฆููุช ุฎุงุต ุฏุงุฑุฏ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         DigitalTwinApp (app.js)          โ  โ ููุทู ูุฑูุฏ ุงุตู
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    โ
        โโโโโโโโโโโโโผโโโโโโโโโโโโ
        โ           โ           โ
โโโโโโโโโผโโโโโโโ โโโโผโโโโโโโ โโโโผโโโโโโโโโโโ
โ SceneManager โ โ UIManagerโ โ Other Managersโ
โโโโโโโโโโโโโโโโ โโโโโโโโโโโโ โโโโโโโโโโโโโโโโ
```

### ุงูฺฏู ุทุฑุงุญ:
- **Manager Pattern**: ูุฑ ูุงฺูู ฺฉ Manager ุงุณุช ฺฉู ูุณุฆููุช ุฎุงุต ุฏุงุฑุฏ
- **Event-Driven**: ุงุฑุชุจุงุท ุจู ูุงฺููโูุง ุงุฒ ุทุฑู Event ูุง ุงูุฌุงู ูโุดูุฏ
- **Dependency Injection**: ูุงฺููโูุง ุงุฒ ุทุฑู constructor ุจู ฺฉุฏฺฏุฑ ูุงุจุณุชู ูโุดููุฏ

---

## ุณุงุฎุชุงุฑ ูุงูโูุง

```
sandbox.ecotwinai/
โโโ index.html                    # ุตูุญู ุงุตู HTML
โโโ package.json                  # ูุงุจุณุชฺฏโูุง ู ุงุณฺฉุฑูพุชโูุง
โโโ README.md                     # ูุณุชูุฏุงุช ุงููู
โโโ AI_DEVELOPMENT_GUIDE.md       # ุงู ูุงู (ุฑุงูููุง ฺฉุงูู)
โโโ lighting-settings-*.json      # ุชูุธูุงุช ููุฑูพุฑุฏุงุฒ ุฐุฎุฑู ุดุฏู
โ
โโโ js/
โ   โโโ app.js                    # ฺฉูุงุณ ุงุตู DigitalTwinApp
โ   โโโ libs/
โ   โ   โโโ babylon.js            # ฺฉุชุงุจุฎุงูู Babylon.js
โ   โ   โโโ babylonjs.materials.min.js
โ   โ
โ   โโโ modules/                   # ูุงฺููโูุง ุงุตู
โ       โโโ SceneManager.js       # ูุฏุฑุช ุตุญูู Babylon.js
โ       โโโ BuildingGenerator.js      # ุชููุฏ ุณุงุฎุชูุงูโูุง ุชุตุงุฏู
โ       โโโ LightingManager.js       # ูุฏุฑุช ููุฑ ู ุณุงู
โ       โโโ CameraController.js      # ฺฉูุชุฑู ุฏูุฑุจู
โ       โโโ GridManager.js          # ูุฏุฑุช ฺฏุฑุฏ
โ       โโโ SelectionManager.js     # ูุฏุฑุช ุงูุชุฎุงุจ ุงุดุง
โ       โโโ MoveManager.js          # ูุฏุฑุช ุฌุงุจุฌุง
โ       โโโ RotateManager.js        # ูุฏุฑุช ฺุฑุฎุด
โ       โโโ ScaleManager.js         # ูุฏุฑุช ููุงุณ
โ       โโโ Shape2DManager.js       # ูุฏุฑุช ุงุดฺฉุงู 2D
โ       โโโ TreeManager.js          # ูุฏุฑุช ุฏุฑุฎุชโูุง
โ       โโโ PolygonManager.js       # ูุฏุฑุช ฺูุฏุถูุนโูุง
โ       โโโ RectangleManager.js     # ูุฏุฑุช ูุณุชุทูโูุง
โ       โโโ CircleManager.js        # ูุฏุฑุช ุฏุงุฑูโูุง
โ       โโโ ObjectListManager.js    # ูุฏุฑุช ูุณุช ุงุดุง
โ       โโโ FPSMonitor.js          # ูุงูุชูุฑ FPS
โ       โโโ UIManager.js            # ูุฏุฑุช ุฑุงุจุท ฺฉุงุฑุจุฑ
โ
โโโ styles/
โ   โโโ main.css                   # ุงุณุชุงูโูุง ุงุตู
โ
โโโ icons/                         # ุขฺฉููโูุง SVG
โ   โโโ rectangle.svg
โ   โโโ circle.svg
โ   โโโ polygon.svg
โ   โโโ tree.svg
โ   โโโ select.svg
โ   โโโ move.svg
โ   โโโ rotate.svg
โ   โโโ scale.svg
โ   โโโ ...
โ
โโโ assets/
    โโโ Models/
        โโโ Trees/                  # ูุฏูโูุง 3D ุฏุฑุฎุชโูุง
            โโโ 1.glb
            โโโ 2.glb
            โโโ 3.glb
            โโโ 4.glb
```

---

## ุฌุฑุงู ุฑุงูโุงูุฏุงุฒ

### 1. ุจุงุฑฺฏุฐุงุฑ ุตูุญู (index.html)
```html
<script src="js/libs/babylon.js"></script>
<script src="js/modules/SceneManager.js"></script>
<!-- ุณุงุฑ ูุงฺููโูุง -->
<script src="js/app.js"></script>
```

### 2. ุฑูุฏุงุฏ DOMContentLoaded
```javascript
document.addEventListener('DOMContentLoaded', () => {
    window.digitalTwinApp = new DigitalTwinApp();
});
```

### 3. ุณุงุฎุช DigitalTwinApp (app.js)
```javascript
class DigitalTwinApp {
    async init() {
        // 1. ุงุฌุงุฏ SceneManager
        this.sceneManager = new SceneManager('renderCanvas');
        
        // 2. ุงูุชุธุงุฑ ุจุฑุง ุขูุงุฏู ุดุฏู ุตุญูู
        await this.waitForSceneReady();
        
        // 3. ุงุฌุงุฏ ุณุงุฑ Manager ูุง
        this.gridManager = new GridManager(...);
        this.lightingManager = new LightingManager(...);
        this.cameraController = new CameraController(...);
        this.selectionManager = new SelectionManager(...);
        // ... ุณุงุฑ Manager ูุง
        
        // 4. ุงุฌุงุฏ UIManager (ุขุฎุฑู ูุฑุญูู)
        this.uiManager = new UIManager(...);
        
        // 5. ุจุงุฑฺฏุฐุงุฑ ุชูุธูุงุช ููุฑูพุฑุฏุงุฒ
        await this.loadLightingSettingsFromFile();
        
        // 6. ุชููุฏ ุฎูุฏฺฉุงุฑ ุณุงุฎุชูุงูโูุง
        this.autoGenerateBuildings();
    }
}
```

### ุชุฑุชุจ ุงูููุช ุฑุงูโุงูุฏุงุฒ:
1. **SceneManager**: ุจุงุฏ ุงูู ุงุฌุงุฏ ุดูุฏ (ุตุญูู ู ููุชูุฑ)
2. **GridManager**: ูุงุจุณุชู ุจู ุตุญูู
3. **LightingManager**: ูุงุจุณุชู ุจู ุตุญูู
4. **CameraController**: ูุงุจุณุชู ุจู ุตุญูู ู canvas
5. **SelectionManager**: ูุงุจุณุชู ุจู ุตุญููุ ุฏูุฑุจู ู canvas
6. **Transform Managers** (Move, Rotate, Scale): ูุงุจุณุชู ุจู SelectionManager
7. **Drawing Managers** (Rectangle, Circle, Polygon, Tree): ูุงุจุณุชู ุจู SelectionManager
8. **UIManager**: ุขุฎุฑู ูุฑุญูู (ูุงุจุณุชู ุจู ููู Manager ูุง)

---

## ูุงฺููโูุง ุงุตู

### 1. SceneManager.js
**ูุณุฆููุช**: ูุฏุฑุช ุตุญูู ุงุตู Babylon.js

**ฺฉูุงุณ ุงุตู**:
```javascript
class SceneManager {
    constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.engine = null;        // ููุชูุฑ Babylon.js
        this.scene = null;         // ุตุญูู ุงุตู
        this.ground = null;        // ุฒูู ุจุฑุง ุทุฑุงุญ
        this.buildings = [];       // ูุณุช ุณุงุฎุชูุงูโูุง
    }
}
```

**ูุชุฏูุง ฺฉูุฏ**:
- `init()`: ุฑุงูโุงูุฏุงุฒ ููุชูุฑ ู ุตุญูู
- `createGround()`: ุงุฌุงุฏ ุฒูู 500x500 ูุชุฑ
- `addBuilding(building)`: ุงูุฒูุฏู ุณุงุฎุชูุงู ุจู ุตุญูู
- `clearBuildings()`: ูพุงฺฉ ฺฉุฑุฏู ููู ุณุงุฎุชูุงูโูุง
- `getGroundIntersection(x, y)`: ูพุฏุง ฺฉุฑุฏู ููุทู ุชูุงุทุน ุจุง ุฒูู
- `getScene()`: ุฏุฑุงูุช ููููู ุตุญูู
- `getGround()`: ุฏุฑุงูุช mesh ุฒูู

**ูฺฺฏโูุง ุฒูู**:
- ุงูุฏุงุฒู: 500x500 ูุชุฑ
- ุดูุงูุช: 0.8 (ููู ุดูุงู)
- ุจุงูุช: ฺฏุฑุฏ SVG
- ูุงุจู ุงูุชุฎุงุจ: `isPickable = true`
- ุฏุฑุงูุช ุณุงู: `receiveShadows = true`

---

### 2. UIManager.js
**ูุณุฆููุช**: ูุฏุฑุช ุชูุงู ุฑุงุจุท ฺฉุงุฑุจุฑ ู ุงุฑุชุจุงุท ุจู ูุงฺููโูุง

**ฺฉูุงุณ ุงุตู**:
```javascript
class UIManager {
    constructor(
        sceneManager, buildingGenerator, lightingManager,
        cameraController, gridManager, selectionManager,
        moveManager, rotateManager, scaleManager,
        shape2DManager, treeManager, polygonManager,
        rectangleManager, circleManager
    ) {
        // ุฐุฎุฑู ููู Manager ูุง
    }
}
```

**ูุณุฆููุชโูุง ุงุตู**:
1. **ูุฏุฑุช ููููุง**: File, Edit, View, Settings
2. **ูุฏุฑุช ุงุจุฒุงุฑูุง ุทุฑุงุญ**: Rectangle, Circle, Polygon, Tree
3. **ูุฏุฑุช ุงุจุฒุงุฑูุง ุชุจุฏู**: Select, Move, Rotate, Scale
4. **ูุฏุฑุช ูพูุฌุฑู Preferences**: ุชูุธูุงุช ุตุญูู
5. **ูุฏุฑุช Popup ูุง Properties**: ููุงุด ู ูุฑุงุด ูฺฺฏโูุง ุงุดุง
6. **ูุฏุฑุช Object List**: ูุณุช ุงุดุง ุฏุฑ ุตุญูู
7. **ูุฏุฑุช ุฑูุฏุงุฏูุง ุตูุญู ฺฉูุฏ**: ูุงูุจุฑูุง
8. **ูุฏุฑุช ุฑูฺฏโูุง ุงุณุชุงูุฏุงุฑุฏ**: ุณุณุชู ุฑูฺฏ ฺฉูพุงุฑฺู

**ูุชุฏูุง ููู**:
- `setupEventListeners()`: ุชูุธู ุชูุงู Event Listener ูุง
- `selectDrawingTool(toolName)`: ุงูุชุฎุงุจ ุงุจุฒุงุฑ ุทุฑุงุญ
- `selectTransformTool(toolName)`: ุงูุชุฎุงุจ ุงุจุฒุงุฑ ุชุจุฏู
- `showPreferencesWindow()`: ููุงุด ูพูุฌุฑู ุชูุธูุงุช
- `showPropertiesPopup(mesh)`: ููุงุด popup ูฺฺฏโูุง
- `getColorByType(type)`: ุฏุฑุงูุช ุฑูฺฏ ุงุณุชุงูุฏุงุฑุฏ ุจุฑ ุงุณุงุณ ููุน
- `getHexColorByType(type)`: ุฏุฑุงูุช ุฑูฺฏ hex ุจุฑ ุงุณุงุณ ููุน

**ุณุณุชู ุฑูฺฏ ุงุณุชุงูุฏุงุฑุฏ**:
```javascript
const colorMap = {
    'ground': { r: 0.4, g: 0.3, b: 0.2 },      // ููููโุง
    'waterway': { r: 0, g: 0.5, b: 1 },         // ุขุจ
    'highway': { r: 0.3, g: 0.3, b: 0.3 },     // ุฎุงฺฉุณุชุฑ
    'green': { r: 0, g: 0.8, b: 0 },           // ุณุจุฒ
    'building': { r: 1, g: 1, b: 1 }           // ุณูุฏ
};
```

---

### 3. SelectionManager.js
**ูุณุฆููุช**: ูุฏุฑุช ุงูุชุฎุงุจ ุงุดุง ุฏุฑ ุตุญูู

**ูฺฺฏโูุง ฺฉูุฏ**:
- ุงูุชุฎุงุจ ุจุง ฺฉูฺฉ
- ุงูุชุฎุงุจ ฺูุฏฺฏุงูู ุจุง Ctrl
- ููุงุด Wireframe ุจุฑุง ุงุดุง ุงูุชุฎุงุจ ุดุฏู
- ูุฏุฑุช Highlight
- ุฑูุฏุงุฏ `selectionChanged` ุจุฑุง ุงุทูุงุน ุณุงุฑ ูุงฺููโูุง

**ูุชุฏูุง ููู**:
- `selectObject(mesh)`: ุงูุชุฎุงุจ ฺฉ ุด
- `deselectObject(mesh)`: ูุบู ุงูุชุฎุงุจ
- `selectAll()`: ุงูุชุฎุงุจ ููู
- `clearSelection()`: ูพุงฺฉ ฺฉุฑุฏู ุงูุชุฎุงุจ
- `getSelectedObjects()`: ุฏุฑุงูุช ูุณุช ุงุดุง ุงูุชุฎุงุจ ุดุฏู
- `getSelectionCount()`: ุชุนุฏุงุฏ ุงุดุง ุงูุชุฎุงุจ ุดุฏู

---

### 4. LightingManager.js
**ูุณุฆููุช**: ูุฏุฑุช ููุฑูพุฑุฏุงุฒ ู ุณุงูโูุง

**ููุฑูุง ุงุณุชูุงุฏู ุดุฏู**:
1. **HemisphericLight**: ููุฑ ูุญุท (ุขุณูุงู)
   - ุดุฏุช: 0.8
   - ุฑูฺฏ: ุขุจ ุฑูุดู (0.9, 0.95, 1.0)

2. **DirectionalLight**: ููุฑ ุฎูุฑุดุฏ
   - ุดุฏุช: 1.2-1.6 (ูุงุจู ุชูุธู)
   - ูููุนุช: (-30, 50, 20)
   - ุฌูุช: (0.5, -0.8, 0.3)

**ุณุณุชู ุณุงู**:
- **ShadowGenerator**: ุจุง ุฑุฒูููุดู 4096x4096
- **Hard Shadows**: ูพุดโูุฑุถ (ุจููู ุจุฑุง ุนููฺฉุฑุฏ)
- **Soft Shadows**: ูุงุจู ูุนุงูโุณุงุฒ (ุจููู ุจุฑุง ฺฉูุช)
- **Object Shadows**: ุณุงู ุจู ุงุดุง
- **Ground Shadows**: ุณุงู ุฑู ุฒูู

**ุชูุธูุงุช ุณุงู**:
```javascript
{
    shadowDarkness: 0.55,        // ุชุฑฺฏ ุณุงู
    shadowBias: 0.00006,          // ุจุงุงุณ ุณุงู
    shadowNormalBias: 0.01,       // ุจุงุงุณ ูุฑูุงู
    shadowDepthScale: 70,        // ููุงุณ ุนูู
    shadowOrthoScale: 220,       // ููุงุณ ุงุฑุชูฺฏุฑุงูฺฉ
    shadowFrustumSize: 350       // ุงูุฏุงุฒู frustum
}
```

**ูุชุฏูุง ููู**:
- `setupLighting()`: ุฑุงูโุงูุฏุงุฒ ููุฑูุง
- `setupShadows()`: ุฑุงูโุงูุฏุงุฒ ุณุงูโูุง
- `toggleObjectShadows()`: ุชุบุฑ ูุถุนุช ุณุงู ุงุดุง
- `toggleHardShadows()`: ุชุบุฑ ุจู ุณุงู ุณุฎุช/ูุฑู
- `addShadowReceiver(mesh)`: ุงูุฒูุฏู ฺฏุฑูุฏู ุณุงู
- `addShadowCaster(mesh)`: ุงูุฒูุฏู ูุฑุณุชูุฏู ุณุงู
- `saveLightingSettings()`: ุฐุฎุฑู ุชูุธูุงุช
- `loadLightingSettings(settings)`: ุจุงุฑฺฏุฐุงุฑ ุชูุธูุงุช

**ูุงู ุชูุธูุงุช**:
- `lighting-settings-2025-09-28.json`: ุชูุธูุงุช ุฐุฎุฑู ุดุฏู
- ุจุงุฑฺฏุฐุงุฑ ุฎูุฏฺฉุงุฑ ุฏุฑ `app.js`

---

### 5. CameraController.js
**ูุณุฆููุช**: ฺฉูุชุฑู ุฏูุฑุจู ArcRotate

**ููุน ุฏูุฑุจู**: `ArcRotateCamera`

**ุชูุธูุงุช ุงููู**:
```javascript
{
    alpha: Math.PI,              // ุฒุงูู ุงูู (ุฌููุจ ุจู ุดูุงู)
    beta: Math.PI / 2.5,         // ุฒุงูู ุนููุฏ
    radius: 100,                 // ูุงุตูู ุงุฒ ูุฑฺฉุฒ
    target: Vector3(0, 0, 0)     // ููุทู ูุฏู
}
```

**ูุญุฏูุฏุชโูุง ุฒูู**:
- ุญุฏุงูู: 1 ูุชุฑ
- ุญุฏุงฺฉุซุฑ: 1000 ูุชุฑ

**ฺฉูุชุฑูโูุง ูุงูุณ**:
- **ฺฉูฺฉ ฺูพ + Drag**: ฺุฑุฎุด ุฏูุฑุจู
- **ฺฉูฺฉ ุฑุงุณุช + Drag**: Pan (ุฌุงุจุฌุง)
- **Scroll**: ุฒูู
- **Middle Click + Drag**: Pan

**ฺฉูุชุฑูโูุง ุตูุญู ฺฉูุฏ**:
- `W/โ`: ฺุฑุฎุด ุจุงูุง
- `S/โ`: ฺุฑุฎุด ูพุงู
- `A/โ`: ฺุฑุฎุด ฺูพ
- `D/โ`: ฺุฑุฎุด ุฑุงุณุช
- `Q`: ุฒูู ุฏูุฑ
- `E`: ุฒูู ูุฒุฏฺฉ
- `R`: ุจุงุฒูุดุงู ุฏูุฑุจู

**ูุชุฏูุง ููู**:
- `setupCamera()`: ุฑุงูโุงูุฏุงุฒ ุฏูุฑุจู
- `setupControls()`: ุชูุธู ฺฉูุชุฑูโูุง
- `resetCamera()`: ุจุงุฒูุดุงู ุจู ูููุนุช ุงููู
- `zoomToFitGround()`: ุฒูู ุจุฑุง ููุงุด ฺฉุงูู ุฒูู
- `disableCameraControls()`: ุบุฑูุนุงู ฺฉุฑุฏู ฺฉูุชุฑูโูุง (ููฺฏุงู ุทุฑุงุญ)
- `enableCameraControls()`: ูุนุงู ฺฉุฑุฏู ฺฉูุชุฑูโูุง

---

### 6. BuildingGenerator.js
**ูุณุฆููุช**: ุชููุฏ ุณุงุฎุชูุงูโูุง ุชุตุงุฏู

**ูพุงุฑุงูุชุฑูุง ุชููุฏ**:
```javascript
{
    count: 10,                    // ุชุนุฏุงุฏ ุณุงุฎุชูุงูโูุง
    minHeight: 4,                 // ุญุฏุงูู ุงุฑุชูุงุน (ูุชุฑ)
    maxHeight: 20,                // ุญุฏุงฺฉุซุฑ ุงุฑุชูุงุน (ูุชุฑ)
    buildingSpacing: 8            // ูุงุตูู minimum ุจู ุณุงุฎุชูุงูโูุง
}
```

**ููุงุทู ุชููุฏ**:
1. **Center Area**: 100x100 ูุชุฑ (ูพุดโูุฑุถ)
2. **Full Area**: 500x500 ูุชุฑ (ฺฉู ุฒูู)

**ูุชุฏูุง ููู**:
- `generateBuildings(count, minH, maxH, useLargeArea)`: ุชููุฏ ุณุงุฎุชูุงูโูุง
- `createBuilding(position, minH, maxH)`: ุงุฌุงุฏ ฺฉ ุณุงุฎุชูุงู
- `generateBuildingPositions(count, useLargeArea)`: ุชููุฏ ูููุนุชโูุง
- `isValidPosition(x, z, existingPositions)`: ุจุฑุฑุณ ุงุนุชุจุงุฑ ูููุนุช
- `clearBuildings()`: ูพุงฺฉ ฺฉุฑุฏู ุณุงุฎุชูุงูโูุง

**ุณุงุฎุชุงุฑ ุณุงุฎุชูุงู**:
```javascript
{
    mesh: BABYLON.Mesh,           // mesh ุณุงุฎุชูุงู
    position: { x, z },           // ูููุนุช
    dimensions: {                 // ุงุจุนุงุฏ
        width, length, height
    }
}
```

---

## ุณุณุชูโูุง ฺฉูุฏ

### 1. ุณุณุชู ุทุฑุงุญ (Drawing System)

#### RectangleManager.js
**ูุณุฆููุช**: ุงุฌุงุฏ ู ูุฏุฑุช ูุณุชุทูโูุง

**ูุฑุขูุฏ ุงุฌุงุฏ**:
1. ฺฉูฺฉ ุงูู: ููุทู ุดุฑูุน
2. Drag: ููุงุด Preview
3. ฺฉูฺฉ ุฏูู: ุงุฌุงุฏ ูุณุชุทู ููุง

**ูฺฺฏโูุง ูุณุชุทู**:
- ุทูู (Length)
- ุนุฑุถ (Width)
- ุงุฑุชูุงุน (Height)
- ููุน (Type): ground, waterway, highway, green, building
- ุฑูฺฏ (Color): ุจุฑ ุงุณุงุณ ููุน

**ูุชุฏูุง ููู**:
- `startDrawing()`: ุดุฑูุน ุทุฑุงุญ
- `handleMouseDown(event)`: ูุฏุฑุช ฺฉูฺฉ
- `handleMouseMove(event)`: ูุฏุฑุช ุญุฑฺฉุช
- `handleMouseUp(event)`: ูพุงุงู ุทุฑุงุญ
- `createRectangle(start, end, height)`: ุงุฌุงุฏ ูุณุชุทู

---

#### CircleManager.js
**ูุณุฆููุช**: ุงุฌุงุฏ ู ูุฏุฑุช ุฏุงุฑูโูุง

**ูุฑุขูุฏ ุงุฌุงุฏ**:
1. ฺฉูฺฉ ุงูู: ูุฑฺฉุฒ ุฏุงุฑู
2. Drag: ุชุนู ุดุนุงุน
3. ฺฉูฺฉ ุฏูู: ุงุฌุงุฏ ุฏุงุฑู ููุง

**ูฺฺฏโูุง ุฏุงุฑู**:
- ูุทุฑ (Diameter)
- ุงุฑุชูุงุน (Height)
- ููุน (Type)
- ุฑูฺฏ (Color)

**ูุชุฏูุง ููู**:
- `startDrawing()`: ุดุฑูุน ุทุฑุงุญ
- `createCircle(center, radius, height)`: ุงุฌุงุฏ ุฏุงุฑู

---

#### PolygonManager.js
**ูุณุฆููุช**: ุงุฌุงุฏ ู ูุฏุฑุช ฺูุฏุถูุนโูุง

**ูุฑุขูุฏ ุงุฌุงุฏ**:
1. ฺฉูฺฉโูุง ูุชูุงู: ุงูุฒูุฏู ุฑุฃุณ
2. ุฏูุจุงุฑ ฺฉูฺฉ ุง Enter: ุจุณุชู ฺูุฏุถูุน
3. Escape: ูุบู

**ูฺฺฏโูุง ฺูุฏุถูุน**:
- ุฑุฃุณโูุง (Vertices)
- ุงุฑุชูุงุน (Height)
- ููุน (Type)
- ุฑูฺฏ (Color)
- ุชุนุฏุงุฏ ูุซูุซโูุง (Triangles)

**ูุชุฏูุง ููู**:
- `startDrawing()`: ุดุฑูุน ุทุฑุงุญ
- `addVertex(point)`: ุงูุฒูุฏู ุฑุฃุณ
- `closePolygon()`: ุจุณุชู ฺูุฏุถูุน
- `triangulatePolygon(vertices)`: ุชุฑโุงูฺฏููุงุณูู ุจุง Earcut

**ุชุฑโุงูฺฏููุงุณูู**:
- ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงูู **Earcut**
- ูพุดุชุจุงู ุงุฒ ฺูุฏุถูุนโูุง ููุนุฑ
- ุชุจุฏู ุจู mesh ุณูโุจุนุฏ

---

#### TreeManager.js
**ูุณุฆููุช**: ูุฑุงุฑ ุฏุงุฏู ุฏุฑุฎุชโูุง ุฏุฑ ุตุญูู

**ูุฏูโูุง ุฏุฑุฎุช**:
- 4 ููุน ูุฏู GLB ุฏุฑ `assets/Models/Trees/`
- ูุงูโฺฏุฐุงุฑ: `1.glb`, `2.glb`, `3.glb`, `4.glb`

**ูุฑุขูุฏ ูุฑุงุฑ ุฏุงุฏู**:
1. ุงูุชุฎุงุจ ุงุจุฒุงุฑ Tree
2. ุงูุชุฎุงุจ ููุน ุฏุฑุฎุช (1-4)
3. ุชูุธู Min/Max Height ู Distance
4. ฺฉูฺฉ ุฑู ุฒูู: ูุฑุงุฑ ุฏุงุฏู ุฏุฑุฎุช

**ูฺฺฏโูุง ุฏุฑุฎุช**:
- ููุน (Type): 1-4
- Scale: ููุงุณ (1.0 ูพุดโูุฑุถ)
- ูููุนุช: ุจุฑ ุงุณุงุณ ฺฉูฺฉ ุฑู ุฒูู
- ฺุฑุฎุด ุชุตุงุฏู: 0-360 ุฏุฑุฌู
- ููุงุณ ุชุตุงุฏู: ุจุฑ ุงุณุงุณ Min/Max Height

**ูุชุฏูุง ููู**:
- `startTreePlacement()`: ุดุฑูุน ูุฑุงุฑ ุฏุงุฏู
- `placeTreeAtPosition(position, treeType)`: ูุฑุงุฑ ุฏุงุฏู ุฏุฑุฎุช
- `loadTreeModel(treeType)`: ุจุงุฑฺฏุฐุงุฑ ูุฏู
- `getRandomTreeRotation()`: ฺุฑุฎุด ุชุตุงุฏู
- `getRandomTreeScale(minH, maxH)`: ููุงุณ ุชุตุงุฏู

**ุจูููโุณุงุฒ**:
- ุงุณุชูุงุฏู ุงุฒ Material ูุดุชุฑฺฉ ุจุฑุง ููู ุฏุฑุฎุชโูุง
- Caching ูุฏูโูุง
- LOD ุจุฑุง ุฏุฑุฎุชโูุง ุฏูุฑ

---

### 2. ุณุณุชู ุชุจุฏู (Transform System)

#### MoveManager.js
**ูุณุฆููุช**: ุฌุงุจุฌุง ุงุดุง

**ุญุงูุชโูุง ูุฎุชุตุงุช**:
- **Local**: ุฌุงุจุฌุง ุฏุฑ ูุญูุฑูุง ูุญู ุด
- **Global**: ุฌุงุจุฌุง ุฏุฑ ูุญูุฑูุง ุฌูุงู

**ูุฑุขูุฏ ุฌุงุจุฌุง**:
1. ุงูุชุฎุงุจ ุด
2. ูุนุงู ฺฉุฑุฏู ุงุจุฒุงุฑ Move
3. Drag ุฑู ุด: ุฌุงุจุฌุง

**ูุชุฏูุง ููู**:
- `activate()`: ูุนุงู ฺฉุฑุฏู
- `deactivate()`: ุบุฑูุนุงู ฺฉุฑุฏู
- `handleMouseDown(event)`: ุดุฑูุน ุฌุงุจุฌุง
- `handleMouseMove(event)`: ุฌุงุจุฌุง
- `handleMouseUp(event)`: ูพุงุงู ุฌุงุจุฌุง

---

#### RotateManager.js
**ูุณุฆููุช**: ฺุฑุฎุด ุงุดุง

**ูุฑุขูุฏ ฺุฑุฎุด**:
1. ุงูุชุฎุงุจ ุด
2. ูุนุงู ฺฉุฑุฏู ุงุจุฒุงุฑ Rotate
3. Drag: ฺุฑุฎุด ุญูู ูุญูุฑ Y

**ูุชุฏูุง ููู**:
- `activate()`: ูุนุงู ฺฉุฑุฏู
- `rotateObject(mesh, angle)`: ฺุฑุฎุด ุด

---

#### ScaleManager.js
**ูุณุฆููุช**: ุชุบุฑ ููุงุณ ุงุดุง

**ูุฑุขูุฏ ุชุบุฑ ููุงุณ**:
1. ุงูุชุฎุงุจ ุด
2. ูุนุงู ฺฉุฑุฏู ุงุจุฒุงุฑ Scale
3. Drag: ุชุบุฑ ููุงุณ

**ูุชุฏูุง ููู**:
- `activate()`: ูุนุงู ฺฉุฑุฏู
- `scaleObject(mesh, scale)`: ุชุบุฑ ููุงุณ

---

### 3. ุณุณุชู ูุฏุฑุช ุงุดุง

#### ObjectListManager.js
**ูุณุฆููุช**: ููุงุด ู ูุฏุฑุช ูุณุช ุงุดุง

**ุฏุณุชูโุจูุฏ ุงุดุง**:
- **Buildings**: ุณุงุฎุชูุงูโูุง
- **Shapes**: ุงุดฺฉุงู 2D (Rectangle, Circle, Polygon)
- **Trees**: ุฏุฑุฎุชโูุง
- **Ground**: ุฒูู

**ูฺฺฏโูุง**:
- ููุงุด ุฏุณุชูโุจูุฏ ุดุฏู
- ุงูุชุฎุงุจ ุงุฒ ูุณุช
- ููุงุด/ูุฎู ฺฉุฑุฏู ุฏุณุชูโูุง
- ุดูุงุฑุด ุงุดุง ุฏุฑ ูุฑ ุฏุณุชู

**ูุชุฏูุง ููู**:
- `updateObjectList()`: ุจูโุฑูุฒุฑุณุงู ูุณุช
- `categorizeObjects()`: ุฏุณุชูโุจูุฏ
- `selectObjectFromList(mesh)`: ุงูุชุฎุงุจ ุงุฒ ูุณุช

---

#### FPSMonitor.js
**ูุณุฆููุช**: ูุงูุชูุฑูฺฏ ุนููฺฉุฑุฏ

**ุงุทูุงุนุงุช ููุงุด ุฏุงุฏู ุดุฏู**:
- FPS ูุนู
- FPS ูุชูุณุท
- FPS ุญุฏุงูู/ุญุฏุงฺฉุซุฑ
- ุชุนุฏุงุฏ Vertices
- ุชุนุฏุงุฏ Faces
- ุชุนุฏุงุฏ Meshes

**ูฺฺฏโูุง**:
- ููุงุด/ูุฎู ฺฉุฑุฏู
- ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ
- ุจูููโุณุงุฒ ุฎูุฏฺฉุงุฑ (ุฏุฑ ุตูุฑุช ูุงุฒ)

---

## ุฑุงุจุท ฺฉุงุฑุจุฑ

### ุณุงุฎุชุงุฑ HTML (index.html)

#### 1. Menu Bar
```html
<nav class="menu-bar">
    <div class="menu-item">File</div>
    <div class="menu-item">Edit</div>
    <div class="menu-item">View</div>
    <div class="menu-item">Settings</div>
</nav>
```

**ููู File**:
- New Scene (Empty/Default)
- Save Scene
- Load Scene
- Export STL
- Import STL

**ููู Edit**:
- Undo
- Redo
- Select All (Shift+A)
- Clear Selection (Shift+D)
- Delete Selected (Delete)

**ููู View**:
- Object List (Ctrl+L)

**ููู Settings**:
- Preferences
- About

---

#### 2. Drawing Panel
```html
<div id="drawingPanel" class="drawing-panel">
    <div class="drawing-tools">
        <div data-tool="rectangle">...</div>
        <div data-tool="circle">...</div>
        <div data-tool="polygon">...</div>
        <div data-tool="tree">...</div>
    </div>
</div>
```

**ูููุนุช**: ุจุงูุง ุณูุช ฺูพ
**ุงุจุฒุงุฑูุง**:
- Rectangle (ุขุจ)
- Circle (ุณุจุฒ)
- Polygon (ูุงุฑูุฌ)
- Tree (ุจููุด)

---

#### 3. Transform Panel
```html
<div id="transformPanel" class="transform-panel">
    <div class="transform-tools">
        <div data-tool="select">...</div>
        <div data-tool="move">...</div>
        <div data-tool="rotate">...</div>
        <div data-tool="scale">...</div>
        <div data-tool="coordinate-toggle">...</div>
    </div>
</div>
```

**ูููุนุช**: ุจุงูุง ูุณุท
**ุงุจุฒุงุฑูุง**:
- Select (ูพุดโูุฑุถ ูุนุงู)
- Move
- Rotate
- Scale
- Coordinate Toggle (Local/Global)

---

#### 4. Preferences Window
**ุจุฎุดโูุง**:
1. **Scene Controls**:
   - Show Grid
   - Object Shadows
   - Hard Shadows
   - Light Intensity
   - Shadow Darkness
   - Shadow Bias
   - Shadow Normal Bias
   - Shadow Depth Scale
   - Shadow Ortho Scale
   - Shadow Frustum Size

2. **Building Settings**:
   - Building Count
   - Min Height
   - Max Height

3. **Camera Controls**:
   - Reset Camera
   - Zoom to Fit Ground

4. **Statistics**:
   - Show Statistics

5. **Actions**:
   - Generate Buildings (Center Area)
   - Generate Buildings (Full Area)
   - Reset Scene
   - Save Lighting Settings
   - Create Test Circle

---

#### 5. Properties Popup
**ุงููุงุน Popup**:
- `propertiesPopup`: ุจุฑุง Rectangle ู Building
- `circlePropertiesPopup`: ุจุฑุง Circle
- `polygonPropertiesPopup`: ุจุฑุง Polygon
- `treePropertiesPopup`: ุจุฑุง Tree

**ูฺฺฏโูุง ูุดุชุฑฺฉ**:
- Name (readonly)
- Type (dropdown)
- Color (color picker)
- Dimensions (Length, Width, Height, Diameter, Radius)

**Auto-save**: ุชุบุฑุงุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฐุฎุฑู ูโุดููุฏ

---

#### 6. Object List Panel
**ูููุนุช**: ุฑุงุณุช ุตูุญู
**ูฺฺฏโูุง**:
- ููุงุด ุฏุณุชูโุจูุฏ ุดุฏู
- ุงูุชุฎุงุจ ุงุฒ ูุณุช
- ููุงุด ุชุนุฏุงุฏ ุฏุฑ ูุฑ ุฏุณุชู
- ุฏฺฉูู Refresh

---

#### 7. Compass
**ูููุนุช**: ูพุงู ุณูุช ฺูพ
**ูฺฺฏโูุง**:
- ููุงุด ุฌูุช ุดูุงู
- ฺุฑุฎุด ุจุง ุฏูุฑุจู
- ููุงุด N, E, S, W

---

## ุงุจุฒุงุฑูุง ุทุฑุงุญ

### ุฌุฑุงู ฺฉู ุทุฑุงุญ

```
1. ุงูุชุฎุงุจ ุงุจุฒุงุฑ ุทุฑุงุญ
   โ
2. ุบุฑูุนุงู ฺฉุฑุฏู ฺฉูุชุฑูโูุง ุฏูุฑุจู
   โ
3. ูุนุงู ฺฉุฑุฏู ุญุงูุช ุทุฑุงุญ
   โ
4. ูุฏุฑุช ุฑูุฏุงุฏูุง ูุงูุณ
   โ
5. ููุงุด Preview
   โ
6. ุงุฌุงุฏ ุด ููุง
   โ
7. ุจุงุฒฺฏุดุช ุจู ุญุงูุช ุนุงุฏ
```

### ูุฏุฑุช ุญุงูุช ุทุฑุงุญ

**UIManager** ูุณุฆูู ูุฏุฑุช ุญุงูุช ุทุฑุงุญ ุงุณุช:

```javascript
isDrawingModeActive() {
    // ุจุฑุฑุณ ูุนุงู ุจูุฏู ูุฑ ุงุจุฒุงุฑ ุทุฑุงุญ
    return this.activeDrawingTool !== null;
}

stopAllDrawingOperations() {
    // ุชููู ููู ุนููุงุช ุทุฑุงุญ
    this.rectangleManager?.stopDrawing();
    this.circleManager?.stopDrawing();
    this.polygonManager?.stopDrawing();
    this.treeManager?.stopTreePlacement();
}
```

### ุฎุฑูุฌ ุงุฒ ุญุงูุช ุทุฑุงุญ

**ุฎุฑูุฌ ุฎูุฏฺฉุงุฑ ุฏุฑ ููุงุฑุฏ ุฒุฑ**:
1. ุงูุชุฎุงุจ ุงุจุฒุงุฑ ุชุจุฏู (Select, Move, Rotate, Scale)
2. ูุดุฑุฏู Escape
3. ฺฉูฺฉ ุฑุงุณุช
4. ุฏูุจุงุฑ ฺฉูฺฉ (ุจุฑุง Polygon)

---

## ุงุจุฒุงุฑูุง ุชุจุฏู

### ุฌุฑุงู ฺฉู ุชุจุฏู

```
1. ุงูุชุฎุงุจ ุด (SelectionManager)
   โ
2. ุงูุชุฎุงุจ ุงุจุฒุงุฑ ุชุจุฏู
   โ
3. ูุนุงู ฺฉุฑุฏู Manager ูุฑุจูุทู
   โ
4. ูุฏุฑุช ุฑูุฏุงุฏูุง ูุงูุณ
   โ
5. ุงุนูุงู ุชุจุฏู
   โ
6. ุจูโุฑูุฒุฑุณุงู Properties Popup
```

### ุณุณุชู ูุฎุชุตุงุช

**Local Mode** (ูพุดโูุฑุถ):
- ุชุจุฏู ุฏุฑ ูุญูุฑูุง ูุญู ุด
- ฺุฑุฎุด ุด ุจุฑ ุชุจุฏู ุชุฃุซุฑ ูโฺฏุฐุงุฑุฏ

**Global Mode**:
- ุชุจุฏู ุฏุฑ ูุญูุฑูุง ุฌูุงู
- ูุณุชูู ุงุฒ ฺุฑุฎุด ุด

**ุชุบุฑ ุญุงูุช**:
- ุฏฺฉูู Coordinate Toggle ุฏุฑ Transform Panel
- ุชุบุฑ ุขฺฉูู (Global/Local)

---

## ูุฏุฑุช ุตุญูู

### ุฑูุฏุงุฏูุง ุตุญูู

**sceneChanged**:
```javascript
window.addEventListener('sceneChanged', (event) => {
    const { scene, buildings } = event.detail;
    // ุจูโุฑูุฒุฑุณุงู UI
});
```

**ุงูุชุดุงุฑ ุฑูุฏุงุฏ**:
- ุงูุฒูุฏู ุณุงุฎุชูุงู
- ุญุฐู ุณุงุฎุชูุงู
- ุชุบุฑ ุตุญูู

### ูุฏุฑุช ุญุงูุธู

**Dispose Pattern**:
```javascript
dispose() {
    // ูพุงฺฉ ฺฉุฑุฏู ููุงุจุน
    mesh.dispose();
    material.dispose();
    texture.dispose();
}
```

**ูุฏุฑุช Wireframe**:
- ุงุฌุงุฏ ููฺฏุงู ุงูุชุฎุงุจ
- ุญุฐู ููฺฏุงู ูุบู ุงูุชุฎุงุจ
- ูพุงฺฉ ฺฉุฑุฏู ุฎูุฏฺฉุงุฑ

---

## ููุฑูพุฑุฏุงุฒ ู ุณุงู

### ุชูุธูุงุช ูพุดโูุฑุถ

**ุงุฒ ูุงู JSON**:
```json
{
    "lightIntensity": 1.2,
    "shadowDarkness": 0.55,
    "shadowBias": 0.00006,
    "hardShadowsEnabled": true
}
```

**ุจุงุฑฺฏุฐุงุฑ ุฎูุฏฺฉุงุฑ**:
- ุฏุฑ `app.js` ููฺฏุงู ุฑุงูโุงูุฏุงุฒ
- ุงุฒ `lighting-settings-*.json`

### ุจูููโุณุงุฒ ุณุงู

**Hard Shadows** (ูพุดโูุฑุถ):
- ุนููฺฉุฑุฏ ุจูุชุฑ
- ุณุงูโูุง ุชุฒ
- ููุงุณุจ ุจุฑุง ุตุญููโูุง ุจุฒุฑฺฏ

**Soft Shadows**:
- ฺฉูุช ุจูุชุฑ
- ุณุงูโูุง ูุฑู
- ุนููฺฉุฑุฏ ฺฉูุชุฑ

**ุชุบุฑ ุญุงูุช**:
- ุฏฺฉูู Hard Shadows ุฏุฑ Preferences
- ุง ุงุฒ ุทุฑู `lightingManager.toggleHardShadows()`

---

## ฺฉูุชุฑู ุฏูุฑุจู

### ูุญุฏูุฏุชโูุง

**Zoom**:
- Min: 1 ูุชุฑ
- Max: 1000 ูุชุฑ

**ฺุฑุฎุด**:
- Alpha: 0 ุชุง 2ฯ
- Beta: 0.1 ุชุง ฯ - 0.1

**Pan**:
- ูุญุฏูุฏ ุจู ูุญูุฑ XZ
- ุจุฏูู ูุญุฏูุฏุช ุงุฑุชูุงุน

### ุบุฑูุนุงู ฺฉุฑุฏู ฺฉูุชุฑูโูุง

**ููฺฏุงู ุทุฑุงุญ**:
```javascript
cameraController.disableCameraControls();
```

**ุจุงุฒฺฏุดุช**:
```javascript
cameraController.enableCameraControls();
```

---

## ูุฏุฑุช ุงูุชุฎุงุจ

### ุญุงูุชโูุง ุงูุชุฎุงุจ

**Single Selection**:
- ฺฉูฺฉ ุฑู ุด
- ุงูุชุฎุงุจ ฺฉ ุด

**Multi Selection**:
- Ctrl + ฺฉูฺฉ
- ุงูุชุฎุงุจ ฺูุฏ ุด

**Select All**:
- Shift + A
- ุง ุงุฒ ููู Edit

**Clear Selection**:
- Shift + D
- ุง ุงุฒ ููู Edit

### ููุงุด ุงูุชุฎุงุจ

**Wireframe**:
- ุงุฌุงุฏ mesh wireframe
- ุฑูฺฏ: ุขุจ (#3498db)
- ุถุฎุงูุช: 2px

**Highlight**:
- ุชุบุฑ Material
- ุง Outline Effect

---

## ุฐุฎุฑู ู ุจุงุฑฺฏุฐุงุฑ

### ุฐุฎุฑู ุชูุธูุงุช ููุฑูพุฑุฏุงุฒ

**ูุฑูุช JSON**:
```json
{
    "lightIntensity": 1.2,
    "shadowDarkness": 0.55,
    "timestamp": "2025-09-29T00:19:38.266Z",
    "version": "1.0"
}
```

**ุฐุฎุฑู**:
- ุฏฺฉูู "Save Lighting Settings" ุฏุฑ Preferences
- ุฏุงูููุฏ ูุงู JSON

**ุจุงุฑฺฏุฐุงุฑ**:
- ุฎูุฏฺฉุงุฑ ุงุฒ `lighting-settings-*.json`
- ุง ุงุฒ ุทุฑู `loadLightingSettings(settings)`

### ุฐุฎุฑู ุตุญูู (ุขูุฏู)

**ูุฑูุช ูพุดููุงุฏ**:
```json
{
    "version": "1.0",
    "objects": [
        {
            "type": "rectangle",
            "position": { "x": 0, "y": 0, "z": 0 },
            "dimensions": { "length": 10, "width": 5, "height": 2 },
            "type": "building",
            "color": "#ffffff"
        }
    ]
}
```

---

## ุชูุณุนู ู ุงูุฒูุฏู ูฺฺฏ

### ุงูุฒูุฏู ุงุจุฒุงุฑ ุทุฑุงุญ ุฌุฏุฏ

**ูุฑุงุญู**:
1. ุงุฌุงุฏ Manager ุฌุฏุฏ (ูุซูุงู `LineManager.js`)
2. ุงูุฒูุฏู ุจู `index.html`:
   ```html
   <script src="js/modules/LineManager.js"></script>
   ```
3. ุงุฌุงุฏ ุฏุฑ `app.js`:
   ```javascript
   this.lineManager = new LineManager(...);
   ```
4. ุงูุฒูุฏู ุจู `UIManager`:
   ```javascript
   constructor(..., lineManager) {
       this.lineManager = lineManager;
   }
   ```
5. ุงูุฒูุฏู ุฏฺฉูู ุฏุฑ Drawing Panel:
   ```html
   <div data-tool="line">...</div>
   ```
6. ูุฏุฑุช ุฑูุฏุงุฏูุง ุฏุฑ `UIManager`:
   ```javascript
   case 'line':
       this.lineManager.startDrawing();
       break;
   ```

### ุงูุฒูุฏู ุงุจุฒุงุฑ ุชุจุฏู ุฌุฏุฏ

**ูุฑุงุญู ูุดุงุจู ุงุจุฒุงุฑ ุทุฑุงุญ**:
1. ุงุฌุงุฏ Manager
2. ุงูุฒูุฏู ุจู HTML
3. ุงุฌุงุฏ ุฏุฑ app.js
4. ุงูุฒูุฏู ุจู UIManager
5. ุงูุฒูุฏู ุฏฺฉูู ุฏุฑ Transform Panel
6. ูุฏุฑุช ุฑูุฏุงุฏูุง

### ุงูุฒูุฏู ููุน ุฌุฏุฏ ุด

**ูุฑุงุญู**:
1. ุงูุฒูุฏู ุจู ุณุณุชู ุฑูฺฏ:
   ```javascript
   const colorMap = {
       'newType': { r: 0.5, g: 0.5, b: 0.5 }
   };
   ```
2. ุงูุฒูุฏู ุจู Properties Popup:
   ```html
   <option value="newType">New Type</option>
   ```
3. ูุฏุฑุช ุฏุฑ Manager ูุง ุทุฑุงุญ

---

## ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ

#### 1. ุตุญูู ุจุงุฑฺฏุฐุงุฑ ููโุดูุฏ
**ุจุฑุฑุณ**:
- Console ุจุฑุง ุฎุทุงูุง
- ุจุงุฑฺฏุฐุงุฑ Babylon.js
- Canvas ููุฌูุฏ ุงุณุช

**ุฑุงูโุญู**:
```javascript
// ุจุฑุฑุณ ุฏุฑ Console
console.log(window.digitalTwinApp);
console.log(window.digitalTwinApp.sceneManager);
```

#### 2. ุณุงูโูุง ููุงุด ุฏุงุฏู ููโุดููุฏ
**ุจุฑุฑุณ**:
- `lightingManager.areShadowsEnabled()`
- `lightingManager.shadowGenerator`
- `mesh.receiveShadows` ู `mesh.getShadowMap()`

**ุฑุงูโุญู**:
```javascript
// ูุนุงู ฺฉุฑุฏู ุณุงูโูุง
lightingManager.enableShadows();
lightingManager.setupShadowsForAllObjects();
```

#### 3. ฺฉูุชุฑูโูุง ุฏูุฑุจู ฺฉุงุฑ ููโฺฉููุฏ
**ุจุฑุฑุณ**:
- `cameraController.cameraControlsDisabled`
- Canvas focus
- Event listeners

**ุฑุงูโุญู**:
```javascript
// ูุนุงู ฺฉุฑุฏู ฺฉูุชุฑูโูุง
cameraController.enableCameraControls();
canvas.focus();
```

#### 4. Wireframe ูพุงฺฉ ููโุดูุฏ
**ุจุฑุฑุณ**:
- `selectionManager` cleanup
- Mesh references

**ุฑุงูโุญู**:
```javascript
// ูพุงฺฉ ฺฉุฑุฏู ุฏุณุช
selectionManager.forceCleanupAllWireframes();
```

### ุชูุงุจุน Debug

**ุฏุฑ Console**:
```javascript
// ุจุฑุฑุณ ุฏูุฑุจู
debugCamera();
testCamera();

// ุจุฑุฑุณ ุฏุฑุฎุชโูุง
testTree();
testTreePlacement();

// ุจุฑุฑุณ ฺูุฏุถูุนโูุง
testPolygonCreation();
testPolygonSnap();

// ุจุฑุฑุณ ุณุงูโูุง
testShadowToggle();
testShadowPerformance();

// ุจุฑุฑุณ ุงูุชุฎุงุจ
testDeleteSelected();
testMenuActions();

// ุจุฑุฑุณ ุฑูฺฏโูุง
testColorConsistency();
testAllDrawingToolsColors();
```

### ูุงฺฏโูุง

**ูุนุงู ฺฉุฑุฏู ูุงฺฏ**:
```javascript
// ุฏุฑ ูุฑ Manager
console.log('Debug info:', data);
```

**ูุงฺฏโูุง ููู**:
- ุฑุงูโุงูุฏุงุฒ Manager ูุง
- ุงุฌุงุฏ/ุญุฐู ุงุดุง
- ุชุบุฑ ุญุงูุช ุทุฑุงุญ
- ุฑูุฏุงุฏูุง ุงูุชุฎุงุจ

---

## ูฺฉุงุช ููู ุจุฑุง ุชูุณุนู

### 1. ุชุฑุชุจ ุงูููุช
- ููุดู `SceneManager` ุงูู ุงุฌุงุฏ ุดูุฏ
- `UIManager` ุขุฎุฑ ุงุฌุงุฏ ุดูุฏ
- Manager ูุง ุทุฑุงุญ ุจุนุฏ ุงุฒ `SelectionManager`

### 2. ูุฏุฑุช ุญุงูุธู
- ููุดู `dispose()` ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ
- Wireframe ูุง ุฑุง ูพุงฺฉ ฺฉูุฏ
- Material ูุง ุฑุง ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑุฏ

### 3. ุฑูุฏุงุฏูุง
- ุงุฒ Custom Events ุงุณุชูุงุฏู ฺฉูุฏ
- Event Listener ูุง ุฑุง cleanup ฺฉูุฏ
- ุงุฒ Event Bubbling ุฌููฺฏุฑ ฺฉูุฏ

### 4. ุนููฺฉุฑุฏ
- ุงุฒ Material ูุดุชุฑฺฉ ุงุณุชูุงุฏู ฺฉูุฏ
- LOD ุจุฑุง ุงุดุง ุฏูุฑ
- Culling ุฎูุฏฺฉุงุฑ Babylon.js

### 5. ฺฉุฏ ุชูุฒ
- ูุฑ Manager ฺฉ ูุณุฆููุช
- ูุงูโฺฏุฐุงุฑ ูุงุถุญ
- ฺฉุงููุชโูุง ููุฏ

---

## ุฎูุงุตู ูุนูุงุฑ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              DigitalTwinApp (app.js)            โ
โ         ููุทู ูุฑูุฏ ุงุตู - ููุงููฺฏโฺฉููุฏู           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
        โโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโ
        โ               โ               โ
โโโโโโโโโผโโโโโโโ  โโโโโโโผโโโโโโโ  โโโโโโผโโโโโโโโโโโ
โ SceneManager โ  โ UIManager  โ  โ Other Managersโ
โ              โ  โ            โ  โ              โ
โ - Engine     โ  โ - Menus    โ  โ - Lighting   โ
โ - Scene      โ  โ - Tools    โ  โ - Camera     โ
โ - Ground     โ  โ - Popups   โ  โ - Selection  โ
โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ
        โ               โ               โ
        โโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโ
                        โ
        โโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโ
        โ               โ               โ
โโโโโโโโโผโโโโโโโ  โโโโโโโผโโโโโโโ  โโโโโโผโโโโโโโโโโโ
โ Drawing      โ  โ Transform  โ  โ Utility       โ
โ Managers     โ  โ Managers   โ  โ Managers      โ
โ              โ  โ            โ  โ              โ
โ - Rectangle  โ  โ - Move     โ  โ - Grid       โ
โ - Circle     โ  โ - Rotate   โ  โ - FPS        โ
โ - Polygon    โ  โ - Scale    โ  โ - ObjectList โ
โ - Tree       โ  โ - Select   โ  โ              โ
โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ
```

---

## ูุชุฌูโฺฏุฑ

ุงู ูพุฑูฺู ฺฉ ูุฑุงุดฺฏุฑ ุณูโุจุนุฏ ฺฉุงูู ู ูุงุจู ุชูุณุนู ุงุณุช ฺฉู ุงุฒ ูุนูุงุฑ ูุงฺููุงุฑ ุงุณุชูุงุฏู ูโฺฉูุฏ. ูุฑ ูุงฺูู ูุณุฆููุช ูุดุฎุต ุฏุงุฑุฏ ู ุงุฑุชุจุงุท ุจู ูุงฺููโูุง ุงุฒ ุทุฑู Event ูุง ู Dependency Injection ุงูุฌุงู ูโุดูุฏ.

**ูฺฉุงุช ฺฉูุฏ ุจุฑุง ุงุฏุงูู ุชูุณุนู**:
1. โ ููุดู ุชุฑุชุจ ุงูููุช ุฑุง ุฑุนุงุช ฺฉูุฏ
2. โ ุงุฒ Event System ุงุณุชูุงุฏู ฺฉูุฏ
3. โ ุญุงูุธู ุฑุง ูุฏุฑุช ฺฉูุฏ
4. โ ฺฉุฏ ุชูุฒ ุจููุณุฏ
5. โ ุชุณุช ฺฉูุฏ

**ุจุฑุง ุณูุงูุงุช ุจุดุชุฑ**:
- ุจุฑุฑุณ Console ุจุฑุง ูุงฺฏโูุง
- ุงุณุชูุงุฏู ุงุฒ ุชูุงุจุน Debug
- ุจุฑุฑุณ ฺฉุฏ ูุงฺููโูุง ููุฌูุฏ

---

**ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู**: 2025-01-XX
**ูุณุฎู**: 1.0.0
**ููุณูุฏู**: AI Development Guide


