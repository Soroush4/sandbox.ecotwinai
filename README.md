# Digital Twin STL Editor

یک وب اپلیکیشن سه بعدی پیشرفته که از Babylon.js استفاده می‌کند و امکان ایجاد و ویرایش صحنه‌های سه بعدی با ساختمان‌های تصادفی را فراهم می‌کند.

## ویژگی‌ها

- **صحنه سه بعدی با گرید**: زمین فرضی با گرید قابل تنظیم
- **تولید ساختمان‌های تصادفی**: ایجاد 10 ساختمان با ابعاد و ارتفاع تصادفی (4-20 متر)
- **نورپردازی پیشرفته**: نور دایرکشنال با سایه‌های ریل‌تایم
- **کنترل‌های دوربین**: حرکت، چرخش و زوم با ماوس
- **رابط کاربری ماژولار**: طراحی مدولار برای مدیریت آسان
- **آیکون‌های SVG**: تمام منوها و دکمه‌ها با آیکون‌های SVG

## نصب و راه‌اندازی

### پیش‌نیازها
- Node.js (نسخه 14 یا بالاتر)
- npm یا yarn

### مراحل نصب

1. **کلون کردن پروژه**:
```bash
git clone <repository-url>
cd DigitalTwin_STLEditor
```

2. **نصب وابستگی‌ها**:
```bash
npm install
```

3. **اجرای پروژه**:
```bash
npm start
```

4. **دسترسی به برنامه**:
   - مرورگر را باز کنید
   - به آدرس `http://localhost:8080` بروید

## استفاده از برنامه

### کنترل‌های اصلی

#### تولید ساختمان‌ها
- روی دکمه "تولید ساختمان‌ها" کلیک کنید
- تعداد، حداقل و حداکثر ارتفاع را تنظیم کنید
- ساختمان‌ها با ابعاد تصادفی ایجاد می‌شوند

#### کنترل‌های دوربین
- **چرخش**: کلیک چپ و کشیدن
- **زوم**: اسکرول ماوس
- **حرکت**: کلیک راست و کشیدن
- **بازنشانی دوربین**: دکمه "بازنشانی دوربین"

#### کنترل‌های صفحه کلید
- **W/↑**: چرخش بالا
- **S/↓**: چرخش پایین
- **A/←**: چرخش چپ
- **D/→**: چرخش راست
- **Q**: زوم دور
- **E**: زوم نزدیک
- **R**: بازنشانی دوربین

### تنظیمات

#### نمایش گرید
- دکمه گرید را برای نمایش/مخفی کردن گرید کلیک کنید

#### سایه‌ها
- دکمه سایه را برای فعال/غیرفعال کردن سایه‌ها کلیک کنید

#### تنظیمات ساختمان‌ها
- **تعداد ساختمان‌ها**: 1 تا 20
- **حداقل ارتفاع**: 2 تا 10 متر
- **حداکثر ارتفاع**: 10 تا 30 متر

## ساختار پروژه

```
DigitalTwin_STLEditor/
├── index.html              # صفحه اصلی
├── package.json            # تنظیمات پروژه
├── styles/
│   └── main.css           # استایل‌های اصلی
├── js/
│   ├── app.js             # فایل اصلی برنامه
│   └── modules/           # ماژول‌های برنامه
│       ├── SceneManager.js      # مدیریت صحنه
│       ├── BuildingGenerator.js # تولید ساختمان‌ها
│       ├── LightingManager.js   # مدیریت نور و سایه
│       ├── CameraController.js  # کنترل دوربین
│       ├── GridManager.js       # مدیریت گرید
│       └── UIManager.js         # مدیریت رابط کاربری
└── icons/                 # آیکون‌های SVG
    ├── buildings.svg
    ├── reset.svg
    ├── grid.svg
    ├── shadow.svg
    └── camera.svg
```

## ماژول‌ها

### SceneManager
- مدیریت صحنه اصلی Babylon.js
- ایجاد زمین و تنظیمات پایه

### BuildingGenerator
- تولید ساختمان‌های تصادفی
- مدیریت ابعاد و موقعیت ساختمان‌ها

### LightingManager
- تنظیم نور دایرکشنال
- مدیریت سایه‌های ریل‌تایم

### CameraController
- کنترل دوربین ArcRotate
- مدیریت حرکت و چرخش

### GridManager
- نمایش و مدیریت گرید
- تنظیمات گرید

### UIManager
- مدیریت رابط کاربری
- ارتباط بین ماژول‌ها

## تکنولوژی‌های استفاده شده

- **Babylon.js**: موتور رندرینگ سه بعدی
- **HTML5 Canvas**: بوم رندرینگ
- **CSS3**: استایل‌دهی و انیمیشن
- **JavaScript ES6+**: منطق برنامه
- **SVG**: آیکون‌ها و گرافیک‌های برداری

## ویژگی‌های فنی

- **رندرینگ ریل‌تایم**: 60 FPS
- **سایه‌های نرم**: Shadow Mapping با Blur
- **فیزیک**: پشتیبانی از فیزیک Cannon.js
- **بهینه‌سازی**: LOD و Culling خودکار
- **پاسخگویی**: طراحی ریسپانسیو

## توسعه

### افزودن ویژگی جدید
1. ماژول جدید در `js/modules/` ایجاد کنید
2. در `app.js` ماژول را import کنید
3. در `UIManager.js` کنترل‌های UI اضافه کنید

### سفارشی‌سازی
- استایل‌ها در `styles/main.css`
- تنظیمات در `js/app.js`
- آیکون‌های جدید در `icons/`

## عیب‌یابی

### مشکلات رایج
1. **خطای بارگذاری**: مرورگر را refresh کنید
2. **عملکرد کند**: تعداد ساختمان‌ها را کاهش دهید
3. **سایه‌های ناقص**: کیفیت سایه را کاهش دهید

### لاگ‌ها
- کنسول مرورگر را برای اطلاعات بیشتر باز کنید
- لاگ‌های خطا در کنسول نمایش داده می‌شوند

## مجوز

این پروژه تحت مجوز MIT منتشر شده است.

## مشارکت

برای مشارکت در پروژه:
1. Fork کنید
2. شاخه جدید ایجاد کنید
3. تغییرات را commit کنید
4. Pull Request ارسال کنید

## پشتیبانی

برای گزارش باگ یا درخواست ویژگی جدید، issue ایجاد کنید.
